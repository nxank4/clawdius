services:
  clawdius_legion:
    build:
      context: .
      network: host
      args:
        HTTP_PROXY: ${HTTP_PROXY:-}
        HTTPS_PROXY: ${HTTPS_PROXY:-}
        NO_PROXY: ${NO_PROXY:-localhost,127.0.0.1,host.docker.internal}
    volumes:
      - ./config:/root/.openclaw
      - ./workspace:/app/workspace
    extra_hosts:
      - "host.docker.internal:host-gateway"
    environment:
      ANTHROPIC_API_KEY: ${ANTHROPIC_API_KEY:-dummy}
      ANTHROPIC_BASE_URL: http://host.docker.internal:8080/v1
      OPENAI_BASE_URL: ${OPENAI_BASE_URL:-http://host.docker.internal:8080/v1}
      OPENCLAW_NO_INTERACTIVE: "true"
      HTTP_PROXY: ${HTTP_PROXY:-}
      HTTPS_PROXY: ${HTTPS_PROXY:-}
      NO_PROXY: ${NO_PROXY:-localhost,127.0.0.1,host.docker.internal}
